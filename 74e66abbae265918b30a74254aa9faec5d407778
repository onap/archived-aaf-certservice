{
  "comments": [
    {
      "key": {
        "uuid": "8f13b1d1_974a36d6",
        "filename": "certService/helm/aaf-cert-service/templates/deployment.yaml",
        "patchSetId": 18
      },
      "lineNbr": 29,
      "author": {
        "id": 5775
      },
      "writtenOn": "2020-03-23T12:47:16Z",
      "side": 1,
      "message": "Deployment should provide ENV variables: KEYSTORE_PATH, KEYSTORE_PASSWORD, TRUSTSTORE_PATH, TRUSTSTORE_PASSWORD. But such shouldn\u0027t be hardcoded but provided by values from helm chart, e.g. PATHs should be prefixed with  .Values.tls.server.volume.mountPath",
      "revId": "74e66abbae265918b30a74254aa9faec5d407778",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "66090f0c_5b8e16e7",
        "filename": "certService/helm/aaf-cert-service/templates/deployment.yaml",
        "patchSetId": 18
      },
      "lineNbr": 29,
      "author": {
        "id": 3771
      },
      "writtenOn": "2020-03-23T14:07:33Z",
      "side": 1,
      "message": "You right, I forget about those ENVS. I will add them, but I have a question about \" e.g. PATHs should be prefixed with  .Values.tls.server.volume.mountPath\".\nIf I understand correctly, you want me to declare those 4 envs (for keystores and paths) here and get value for them from values.yaml file, right? \nBut in that case I cannot use prefix (.Values.tls.server.volume.mountPath), becacuse Helm doesn\u0027t support templating in values.yaml file \u003d\u003e i cannot use values to declare other values in same file.",
      "parentUuid": "8f13b1d1_974a36d6",
      "revId": "74e66abbae265918b30a74254aa9faec5d407778",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d481d7a4_ee533b45",
        "filename": "certService/helm/aaf-cert-service/templates/deployment.yaml",
        "patchSetId": 18
      },
      "lineNbr": 29,
      "author": {
        "id": 5775
      },
      "writtenOn": "2020-03-23T14:17:01Z",
      "side": 1,
      "message": "I meant that if you provide KEYSTORE_PATH it should be like this {{Values.tls.server.volume.mountPath}}/keystore.jks. \nYou don\u0027t need to provide in helm chart values for every path. I don\u0027t mind to hardcode names of files on deployment layer. \n\nBTW: I was aware that templating in values.yaml is not possible. Nokia Software (NSW) has its own plugin for helm to do this.",
      "parentUuid": "66090f0c_5b8e16e7",
      "revId": "74e66abbae265918b30a74254aa9faec5d407778",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a948523b_20b5ce08",
        "filename": "certService/helm/aaf-cert-service/values.yaml",
        "patchSetId": 18
      },
      "lineNbr": 12,
      "author": {
        "id": 5775
      },
      "writtenOn": "2020-03-23T12:47:16Z",
      "side": 1,
      "message": "Command should rely on ENV variables provided by deployment for both - keystore and truststore and password",
      "revId": "74e66abbae265918b30a74254aa9faec5d407778",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "15fa0002_72cc1fd4",
        "filename": "certService/helm/aaf-cert-service/values.yaml",
        "patchSetId": 18
      },
      "lineNbr": 12,
      "author": {
        "id": 3771
      },
      "writtenOn": "2020-03-23T14:07:33Z",
      "side": 1,
      "message": "We store only .jks format in ENV variables. And here we use root.crt and .p12 format. \nSo I see 2 options:\n1. Leave it as it is (just change pass to use ENV)\n2. Add 2 more ENV Variables (for root.crt and certServiceServer-keystore.p12)\n\nWhich one you prefer?",
      "parentUuid": "a948523b_20b5ce08",
      "revId": "74e66abbae265918b30a74254aa9faec5d407778",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b7f7c6f0_25cb9b75",
        "filename": "certService/helm/aaf-cert-service/values.yaml",
        "patchSetId": 18
      },
      "lineNbr": 12,
      "author": {
        "id": 5775
      },
      "writtenOn": "2020-03-23T14:17:01Z",
      "side": 1,
      "message": "In deployment please provide two new ENV vars, but prefix them with mountPoint variable :) I don\u0027t mind to hardcode names of files on deployment layer.",
      "parentUuid": "15fa0002_72cc1fd4",
      "revId": "74e66abbae265918b30a74254aa9faec5d407778",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b0c789f9_3bcb7469",
        "filename": "certService/helm/aaf-cert-service/values.yaml",
        "patchSetId": 18
      },
      "lineNbr": 16,
      "author": {
        "id": 5775
      },
      "writtenOn": "2020-03-23T12:47:16Z",
      "side": 1,
      "message": "Command should rely on ENV variables provided by deployment for both - keystore and truststore and password",
      "revId": "74e66abbae265918b30a74254aa9faec5d407778",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "8518c747_133d7111",
        "filename": "certs/Makefile",
        "patchSetId": 18
      },
      "lineNbr": 24,
      "author": {
        "id": 5775
      },
      "writtenOn": "2020-03-23T12:47:16Z",
      "side": 1,
      "message": "Just wondering if both root-keystore.jks and truststore.jks are needed",
      "revId": "74e66abbae265918b30a74254aa9faec5d407778",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "234da18a_c85219cf",
        "filename": "certs/Makefile",
        "patchSetId": 18
      },
      "lineNbr": 24,
      "author": {
        "id": 3435
      },
      "writtenOn": "2020-03-23T13:15:37Z",
      "side": 1,
      "message": "we use truststore.jks in aaf-certservice-api and aaf-certservice-client.",
      "parentUuid": "8518c747_133d7111",
      "revId": "74e66abbae265918b30a74254aa9faec5d407778",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "8b7e33ea_bccf9e1e",
        "filename": "certs/Makefile",
        "patchSetId": 18
      },
      "lineNbr": 24,
      "author": {
        "id": 5775
      },
      "writtenOn": "2020-03-23T14:17:01Z",
      "side": 1,
      "message": "My comment was related to unnecessary root-keystore.jks creation. Why we cannot in step 1 create truststore.jks, export from it root.crt and remove step_3 completly?",
      "parentUuid": "234da18a_c85219cf",
      "revId": "74e66abbae265918b30a74254aa9faec5d407778",
      "serverId": "14b4e41f-c4e3-4fb9-9955-6a9b5656895a",
      "unresolved": true
    }
  ]
}